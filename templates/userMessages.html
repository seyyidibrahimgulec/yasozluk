{% extends 'base.html' %}


{% block content %}

<div class="container-fluid">
  <div class="row">
    <div class="col-3 p-5" style="max-height: 90vh;overflow-y: auto;">
      <div class="newTopicLink">
        <a style="font-size: x-large; -webkit-box-shadow: 0px 13px 12px -10px rgba(0,0,0,0.75);
    -moz-box-shadow: 0px 13px 12px -10px rgba(0,0,0,0.75);
    box-shadow: 0px 13px 12px -10px rgba(0,0,0,0.75);" class="btn btn-outline-primary"
          href="{% url 'newMessage'%}">Yeni Mesaj</a>
      </div>
      {% for item in messages %}
      <div class="row" style="border-bottom: 1px solid #80808052; margin-bottom: 5px; padding-bottom: 5px;">
        <div class="col-12">
          <div class="row"><a href="{% url 'messagesRoute' user_id=item.user_id slug=item.target %}">{{ item.text }}</a>
          </div>
          <div class="row" style="float:left;font-weight: 500;font-size: 13px;">{{item.target}}</div>
          <div class="row" style="float:right;font-style: italic;font-size: 12px;">{{item.date}}</div>
        </div>
      </div>
      {% endfor %}
    </div>
    <div class="col-6 border-right border-left" style="padding-right: 0;">
      {% if conversationWith %}
      <div class="col-12" style="height: 10vh;margin-left: -15px;
                                border-radius: 2px;background: #343a40;color: #dadada;
                                border-top: 1px solid #cccccc36">
        <p>Conversation with :</p> {{conversationWith.username}}
      </div>
      {% endif %}
      <div style="height: 60vh;overflow-y: auto;">
        {% if current_conversation.count == 0 %}
        <div>
          <p>
            <h2>Oops</h2>
          </p>
          <p>
            <h6>No messages found.</h6>
          </p>
        </div>
        {% endif %}
        <div style="clear:both;margin-top: 30px;">
          {% for entry in current_conversation %}
          {% include "includes/message.html" %}
          {% endfor %}
        </div>
      </div>
      <div style="text-align: end;height: 20vh;border-top: 1px solid #0000004f;padding-top: 5px;" class="pt-1">
        <div class="row">
          <div class="col-md-12">
            <textarea class="form-control" placeholder="Type your message.." id="txtMessage"></textarea>
          </div>
          <div class="col-md-12" style="text-align: end;">
            <button id="btnSendMessage" onclick="sendMessage()" class="form-control">Send</button>
          </div>
        </div>
      </div>
    </div>
    <div class="col-3">

    </div>
  </div>
</div>
<script>
  function sendMessage() {
    alert("ye");
  }
</script>
{% endblock content %}